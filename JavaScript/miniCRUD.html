<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=100, initial-scale=1.0">
    <title>Mini CRUD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div class="container p-5 bg-secondary text-white mt-2">
        <div class="mb-3 ">
            <label for="name" class="form-label">Name</label>
            <input type="text" class="form-control" id="txtnm" placeholder="name">
        </div>
        <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="txtem" placeholder="name@example.com">
        </div>
        <br>
        <div class="mb-3 container p-2 mt-2">
            <button class="btn btn-primary btn-lg" id="btnAdd" onclick="add()">Add</button>
        </div> 
    </div>

    <div class="table-container">
        <table>
            <tr>
                <th>Name </th>
                <th>Email </th>
            </tr>
            <tbody id="tabledata">
                
            </tbody>
        </table>
    </div>
    
    <script>
        //============
        let arrEmployees = [];
//=======================
    function validate(name, email) {
        // Simple validation
        if (name === "") {
            alert("Name is required.");
            document.getElementById("txtnm").focus();
            return false;
        }
        else if(email === ""){
            alert("Email is required");
            document.getElementById("txtem").focus();
            return false;
        }
        return true;
    }
//==========================
    function add() {
        let name = document.getElementById("txtnm").value;
        let email = document.getElementById("txtem").value;

        if (validate(name, email)) {
            alert("Validation Ok");
        }

        let employee={
            Name : name,
            Email : email,
        };

        //localStorage.setItem("Name",name);
        //localStorage.setItem("Email",email);

        //BindTable();
        
        
        arrEmployees=JSON.parse(localStorage.getItem(employee));
        arrEmployees=arrEmployees=null?[]:arrEmployees;
        arrEmployees.push(employee);

        localStorage.setItem("Employees",JSON.stringify(arrEmployees));
    }
//============================
    function BindTable(){
    
    //let name = localStorage.getItem("Name");
    //let email = localStorage.getItem("Email");

    let employees = JSON.parse(localStorage.getItem("employees"));
        //alert("Name is "=name+" "+"Email is "+email);

        let data="";

        if(employees != null && employees.length >0){
            for(let i = 0;i<employees.length;i++){
                data += "<tr>";
                data += `<td>${employees[i].Name}</td>`;
                data +=`<td>${employees[i].Email}</td>`;
                data += "</tr>";
            }
        }
        else{
            data += "<p>No record found</p>";
        }

        document.getElementById("tabledata").innerHTML=data;

    }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        crossorigin="anonymous"></script>
</body>

</html>
